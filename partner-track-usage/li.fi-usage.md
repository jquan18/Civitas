# 2. Key Files Where LI.FI is Used

| File Path | Functional Description |
| :--- | :--- |
| [frontend/src/components/deploy/LiFiBridgeStep.tsx](https://github.com/jquan18/Civitas/blob/main/frontend/src/components/deploy/LiFiBridgeStep.tsx) | **Core bridge component:** Integrates `@lifi/sdk` to call `getRoutes()` and `executeRoute()`. Handles route selection UI, custom gas buffering (150% L2 buffer), and execution status tracking. |
| [frontend/src/lib/funding/routing.ts](https://github.com/jquan18/Civitas/blob/main/frontend/src/lib/funding/routing.ts) | **Multi-chain routing:** Orchestrates wallet scanning and `getOptimalFundingRoutes()` by querying the LI.FI API to compare cost and speed across all chains where the user holds assets. |
| [frontend/src/lib/ai/tools.ts](https://github.com/jquan18/Civitas/blob/main/frontend/src/lib/ai/tools.ts) | **AI agent tools:** Implements `scanWalletBalances` and `getOptimalFundingRoute`, allowing the Gemini agent to autonomously reason about and invoke LI.FI routing mid-conversation. |
| [frontend/src/lib/lifi/sdk-config.ts](https://github.com/jquan18/Civitas/blob/main/frontend/src/lib/lifi/sdk-config.ts) | **SDK Configuration:** Handles LI.FI SDK initialization and provider integration with wagmi for wallet client management and chain switching. |
| [frontend/src/lib/lifi/constants.ts](https://github.com/jquan18/Civitas/blob/main/frontend/src/lib/lifi/constants.ts) | **Chain Data:** Defines supported chain IDs (Base, Ethereum, Arbitrum, Optimism, Polygon) and the specific USDC contract addresses for each network. |
| [frontend/src/components/bridge/BridgeRecommendationModal.tsx](https://github.com/jquan18/Civitas/blob/main/frontend/src/components/bridge/BridgeRecommendationModal.tsx) | **AI UI Component:** Displays the specific route recommended by the AI agent and triggers execution via the `LiFiBridgeStep` logic. |
| [frontend/src/components/deploy/DeployModal.tsx](https://github.com/jquan18/Civitas/blob/main/frontend/src/components/deploy/DeployModal.tsx) | **Flow Orchestration:** Manages the deployment and funding sequence, conditionally rendering `LiFiBridgeStep` for mainnet transactions versus direct funding for testnets. |
| [frontend/src/components/dashboard/FundingModal.tsx](https://github.com/jquan18/Civitas/blob/main/frontend/src/components/dashboard/FundingModal.tsx) | **Dashboard Integration:** Provides a dedicated modal for users to top up or add liquidity to existing contracts using cross-chain bridging. |
| [frontend/src/components/deploy/BalancePoller.tsx](https://github.com/jquan18/Civitas/blob/main/frontend/src/components/deploy/BalancePoller.tsx) | **Activation Logic:** Continuously polls the contract's USDC balance post-bridge to detect arrival of funds and trigger the automatic "Active" state transition. |